# ==============================================================================
# 警告：此文件内容为 PROPERTIES 格式。
# 如果您希望 Spring Boot 正确读取，请确保文件名为 application.properties
# ==============================================================================

spring.application.name=RatingBackend

# 后端服务端口
server.port=8081 

# ----------------------------------------------------
# 数据库配置
# ----------------------------------------------------
# 已修改时区为 Asia/Shanghai (UTC+8)
# 启用 rewriteBatchedStatements 以真正实现批量插入（关键优化）
spring.datasource.url=jdbc:mysql://localhost:3306/ratingdb?useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true&rewriteBatchedStatements=true
# 替换为您的 MySQL 用户名
spring.datasource.username=root
# 替换为您的 MySQL 密码
spring.datasource.password=293652
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# ----------------------------------------------------
# JPA / Hibernate 配置
# ----------------------------------------------------
spring.jpa.hibernate.ddl-auto=none
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
# 打印 SQL 语句，方便调试
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true

# ----------------------------------------------------
# 批处理优化配置（关键性能提升）
# ----------------------------------------------------
# 启用 Hibernate 批处理（用于 saveAll 的更新操作）
spring.jpa.properties.hibernate.jdbc.batch_size=100
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
# 批量处理版本数据
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# ----------------------------------------------------
# 日志配置（关键性能提升）
# ----------------------------------------------------
# 关闭 Spring Boot 启动日志
logging.level.root=WARN
logging.level.org.springframework=WARN
logging.level.org.springframework.boot=WARN
logging.level.org.springframework.data=WARN
logging.level.org.hibernate=WARN
logging.level.org.hibernate.orm=WARN
logging.level.com.zaxxer.hikari=WARN
logging.level.org.apache.catalina=WARN

# 保留应用自身的日志级别为 WARN（只显示警告及以上）
logging.level.com.community.rating=INFO# ----------------------------------------------------
# HikariCP 连接池优化
# ----------------------------------------------------
# 增加连接池大小以支持批量操作
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
# 连接超时时间
spring.datasource.hikari.connection-timeout=30000
# 最大生命周期
spring.datasource.hikari.max-lifetime=1800000

